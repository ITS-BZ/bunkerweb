{
  "id": "letsencrypt_dns",
  "name": "Let's Encrypt DNS",
  "description": "Automatic creation, renewal and configuration of Let's Encrypt certificates using DNS challenges.",
  "version": "0.7",
  "stream": "yes",
  "settings": {
    "AUTO_LETS_ENCRYPT_DNS": {
      "context": "multisite",
      "default": "no",
      "help": "Activate automatic Let's Encrypt DNS.",
      "id": "auto-lets-encrypt-dns",
      "label": "Automatic Let's Encrypt Dns",
      "regex": "^(yes|no)$",
      "type": "check"
    },
    "LETS_ENCRYPT_DNS_EMAIL": {
      "context": "multisite",
      "default": "",
      "help": "The email address to use for Let's Encrypt notifications.",
      "id": "lets-encrypt-dns-email",
      "label": "Email Address for Notifications",
      "regex": "^([^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+)?$",
      "type": "text"
    },
    "USE_LETS_ENCRYPT_DNS_STAGING": {
      "context": "multisite",
      "default": "no",
      "help": "Use the Let's Encrypt staging environment.",
      "id": "use-lets-encrypt-dns-staging",
      "label": "Use Let's Encrypt DNS Staging",
      "regex": "^(yes|no)$",
      "type": "check"
    },
    "LETS_ENCRYPT_DNS_PROVIDER": {
      "context": "multisite",
      "default": "",
      "help": "The DNS provider to use for DNS challenges.",
      "id": "auto-lets-encrypt-dns-provider",
      "label": "DNS Provider",
      "regex": "^(cloudflare|digitalocean|google|linode|ovh|rfc2136|route53|scaleway)?$",
      "type": "select",
      "select": [
        "",
        "cloudflare",
        "digitalocean",
        "google",
        "linode",
        "ovh",
        "rfc2136",
        "route53",
        "scaleway"
      ]
    },
    "USE_LETS_ENCRYPT_DNS_WILDCARD": {
      "context": "multisite",
      "default": "yes",
      "help": "Create wildcard certificates for all domains using DNS challenges.",
      "id": "use-lets-encrypt-dns-wildcard",
      "label": "Wildcard Certificates",
      "regex": "^(yes|no)$",
      "type": "check"
    },
    "LETS_ENCRYPT_DNS_PROPAGATION": {
      "context": "multisite",
      "default": "default",
      "help": "The time to wait for DNS propagation in seconds.",
      "id": "lets-encrypt-dns-propagation",
      "label": "DNS Propagation",
      "regex": "^(default|\\d+)$",
      "type": "text"
    },
    "LETS_ENCRYPT_DNS_CREDENTIAL_ITEM": {
      "context": "multisite",
      "default": "",
      "help": "Configuration item that will be added to the credentials.ini file for the DNS provider (e.g. 'cloudflare_api_token 123456').",
      "id": "lets-encrypt-dns-credential-item",
      "label": "Credential Item",
      "regex": "^(\\w+ .+)?$",
      "type": "password",
      "multiple": "lets-encrypt-dns-credential-item"
    },
    "LETS_ENCRYPT_DNS_CLEAR_OLD_CERTS": {
      "context": "global",
      "default": "no",
      "help": "Clear old certificates when renewing.",
      "id": "lets-encrypt-dns-clear-old-certs",
      "label": "Clear old certificates when they are no longer needed",
      "regex": "^(yes|no)$",
      "type": "check"
    }
  },
  "jobs": [
    {
      "name": "install-lets-encrypt-dns-dependencies",
      "file": "install-lets-encrypt-dns-dependencies.py",
      "every": "once",
      "reload": false
    },
    {
      "name": "dns-certbot-new",
      "file": "dns-certbot-new.py",
      "every": "once",
      "reload": false
    },
    {
      "name": "dns-certbot-renew",
      "file": "dns-certbot-renew.py",
      "every": "day",
      "reload": false
    }
  ]
}
