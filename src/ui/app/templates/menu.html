<!-- Menu -->
<aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
    <div class="app-brand main mb-2">
        <a href="https://www.bunkerweb.io/?utm_campaign=self&utm_source=ui"
           target="_blank"
           class="app-brand-link">
            <span class="app-brand-logo main w-100">
                <img class="img-fluid"
                     src="{{ url_for('static', filename='img/logo-menu.png') }}"
                     alt="BunkerWeb logo">
            </span>
        </a>
        <a href="javascript:void(0);"
           class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
            <i class="bx bx-chevron-left bx-sm d-flex align-items-center justify-content-center"></i>
        </a>
    </div>
    <div class="border border-primary border-0 border-top"></div>
    {% with menu_items = {
        "home": {"url": url_for('home'), "icon": "bx-home-smile"},
        "instances": {"url": url_for('instances'), "icon": "bx-server"},
        "global-config": {"url": url_for('global_config'), "icon": "bx-cog"},
        "services": {"url": url_for('services'), "icon": "bx-cube"},
        "configs": {"url": url_for('configs'), "icon": "bx-wrench"},
        "plugins": {"url": url_for('plugins'), "icon": "bx-plug"},
        "cache": {"url": url_for('cache'), "icon": "bx-data"},
        "reports": {"url": url_for('reports'), "icon": "bx-bar-chart-alt-2"},
        "bans": {"url": url_for('bans'), "icon": "bx-block"},
        "jobs": {"url": url_for('jobs'), "icon": "bx-time-five"},
        "logs": {"url": url_for('logs'), "icon": "bx-file-find"},
        } %}
        <ul class="menu-inner py-1">
            {% for endpoint, item in menu_items.items() %}
                <li class="menu-item {% if endpoint in request.path.split('/')[1] %}active{% endif %} {% if item.get('sub') and item.get('open', True) %}open{% endif %}">
                    <a href="{{ item['url'] }}"
                       class="menu-link {% if item.get('sub') %}menu-toggle{% endif %}">
                        <i class="menu-icon tf-icons bx {{ item['icon'] }}"></i>
                        <div class="text-truncate"
                             data-i18n="{{ endpoint.replace('-', ' ') |title }}">
                            {{ endpoint.replace('-', ' ') |title }}
                        </div>
                    </a>
                    {% if item.get('sub') %}
                        <ul class="menu-sub">
                            {% for sub in item['sub'][:item.get('max', 5)] %}
                                <li class="menu-item {% if current_endpoint == sub %}active{% endif %}">
                                    <a href="{{ item['url'] }}/{{ sub }}" class="menu-link">
                                        <div class="text-truncate" data-i18n="Without menu">{{ sub }}</div>
                                    </a>
                                </li>
                            {% endfor %}
                            {% if item['sub']|length > item.get('max', 5) %}
                                <li class="menu-item">
                                    <a href="{{ item['url'] }}" class="menu-link">
                                        <div class="text-truncate" data-i18n="Without menu">More...</div>
                                    </a>
                                </li>
                            {% endif %}
                        </ul>
                    {% endif %}
                </li>
            {% endfor %}
            <!-- Plugins Pages -->
            <li class="menu-header text-uppercase align-items-center">
                <span class="menu-header-text">Plugins Pages</span>
                <button class="btn btn-link menu-header-text p-0"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#pluginsCollapse"
                        aria-expanded="true"
                        aria-controls="pluginsCollapse">
                    <i class="bx bx-chevron-right chevron-icon chevron-rotate"></i>
                </button>
            </li>
            <div class="collapse w-100 show" id="pluginsCollapse">
                {% for plugin, plugin_data in plugins.items() %}
                    {% with not_pro_pro_plugin = not is_pro_version and plugin_data['type'] == "pro" %}
                        {% if not_pro_pro_plugin or plugin_data['page'] %}
                            <li class="menu-item{% if current_endpoint == plugin %} active{% endif %}"{% if not_pro_pro_plugin %}data-bs-toggle="tooltip" data-bs-placement="top" data-bs-html="true" title="<i class='bx bx-diamond bx-xs'></i><span>Pro feature</span>"
                            {% endif %}
                            >
                            <a href="{% if not_pro_pro_plugin %}https://panel.bunkerweb.io/?utm_campaign=self&utm_source=ui#pro{% else %}{{ url_for("plugins") }}/{{ plugin }}{% endif %}"
                               class="menu-link"
                               {% if not_pro_pro_plugin %}target="_blank" rel="noopener"{% endif %}>
                                <i class="menu-icon tf-icons bx bx-puzzle"></i>
                                <div class="text-truncate{% if plugin_data['type'] == 'pro' %} text-primary shine shine-sm{% endif %} pe-2"
                                     data-i18n="{{ plugin_data['name'] }}">{{ plugin_data['name'] }}</div>
                                {% if plugin_data['type'] != "pro" %}
                                    <div class="badge rounded-pill bg-label-{% if plugin['type'] == 'core' %}secondary{% else %}primary{% endif %} text-uppercase fs-tiny ms-auto">
                                        {{ plugin_data['type'].title() }}
                                    </div>
                                {% else %}
                                    <div class="badge badge-center rounded-pill text-uppercase fs-tiny ms-auto">
                                        <img src="{{ pro_diamond_url }}"
                                             alt="Pro plugin"
                                             width="18px"
                                             height="15.5px">
                                    </div>
                                {% endif %}
                            </a>
                        </li>
                    {% endif %}
                {% endwith %}
            {% endfor %}
        </div>
        <!-- / Plugins Pages -->
        <!-- Misc -->
        <li class="menu-header small text-uppercase">
            <span class="menu-header-text">Misc</span>
        </li>
        <li class="menu-item">
            <a href="https://panel.bunkerweb.io/order/support/?utm_campaign=self&utm_source=ui"
               target="_blank"
               class="menu-link">
                <i class="menu-icon tf-icons bx bx-support"></i>
                <div class="text-truncate" data-i18n="Support">Support</div>
            </a>
        </li>
        <li class="menu-item">
            <a href="https://docs.bunkerweb.io/latest/?utm_campaign=self&utm_source=ui"
               target="_blank"
               class="menu-link">
                <i class="menu-icon tf-icons bx bx-file"></i>
                <div class="text-truncate" data-i18n="Documentation">Documentation</div>
            </a>
        </li>
    </ul>
{% endwith %}
</aside>
<!-- / Menu -->
